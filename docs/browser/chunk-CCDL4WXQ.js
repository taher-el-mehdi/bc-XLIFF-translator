import{$ as h,$a as T,Aa as ne,Ba as ie,Ca as U,Da as z,Ea as J,F as te,Fa as a,Ga as l,Ha as y,Ia as p,J as X,Ja as u,Ka as L,La as w,Ma as O,O as f,P as g,Q as E,R as D,Ra as C,Sa as N,T as be,Ta as c,Ua as oe,Va as re,Wa as q,Xa as we,Ya as S,Za as s,_a as F,a as Ce,aa as ve,ab as Ee,b as he,bb as Se,db as Te,fb as M,gb as P,hb as I,ib as K,ka as d,qb as ye,sa as V,ya as x,za as _}from"./chunk-V6FKBWQ2.js";var ae=class{format="flat";canParse(t){try{let e=JSON.parse(t);return typeof e=="object"&&e!==null}catch{return!1}}parse(t){let e=JSON.parse(t),n=[];if("translations"in e&&typeof e.translations=="object")this.format="angular",this.flatten(e.translations,"",n);else{let o=e,m=Object.values(o).some(v=>typeof v=="object"&&v!==null);this.format=m?"nested":"flat",this.flatten(o,"",n)}return{document:e,units:n,documentFormat:`json (${this.format})`,targetLang:"locale"in e?e.locale:void 0}}flatten(t,e,n){for(let[o,r]of Object.entries(t)){let m=e?`${e}.${o}`:o;typeof r=="object"&&r!==null?this.flatten(r,m,n):n.push({id:m,source:"",target:String(r)})}}updateUnit(t,e,n){let o="translations"in t&&typeof t.translations=="object"?t.translations:t;if(this.format==="nested"){let r=e.split("."),m=o;for(let v=0;v<r.length-1;v++){let b=r[v];(!m[b]||typeof m[b]!="object")&&(m[b]={}),m=m[b]}m[r[r.length-1]]=n}else o[e]=n}serialize(t){return JSON.stringify(t,null,2)}getFeatures(){return{hasSource:!1,hasNotes:!1}}getSupportedExportFormats(){return this.format==="nested"?[{type:"json",jsonFormat:"nested"},{type:"json",jsonFormat:"flat"}]:this.format==="angular"?[{type:"json",jsonFormat:"angular"}]:[{type:"json",jsonFormat:"flat"}]}};var W=class{canParse(t){return t.includes("urn:oasis:names:tc:xliff:document:1.2")}parse(t){let n=new DOMParser().parseFromString(t,"text/xml");if(n.querySelector("parsererror"))throw new Error("Failed to parse XML");let r=[],m=n.querySelectorAll("trans-unit"),v=n.querySelector("file"),b=v?.getAttribute("source-language")||void 0,k=v?.getAttribute("target-language")||void 0;return m.forEach(A=>{let ue=A.getAttribute("id")||"",R=A.querySelector("source"),ee=A.querySelector("target"),fe=R?.textContent||"",ge=ee?.textContent||"",xe=ee?.getAttribute("state")||void 0,H=[];A.querySelectorAll('context-group[purpose="location"]').forEach(j=>{let B=j.querySelector('context[context-type="sourcefile"]')?.textContent||"",_e=j.querySelector('context[context-type="linenumber"]')?.textContent||"";B&&H.push({type:"location",content:`${B}${_e?":"+_e:""} `,sourcefile:B,linenumber:_e,purpose:"location"})}),A.querySelectorAll("note").forEach(j=>{H.push({type:"note",content:j.textContent||"",from:j.getAttribute("from")||void 0,priority:Number(j.getAttribute("priority"))||void 0})}),r.push({id:ue,source:fe,target:ge,notes:H.length>0?H:void 0,state:xe})}),{document:n,units:r,sourceLang:b,targetLang:k,documentFormat:"xliff 1.2"}}updateUnit(t,e,n){let o=t.getElementsByTagName("trans-unit"),r=null;for(let m of o)if(m.getAttribute("id")===e){r=m;break}if(r){let m=r.querySelector("target");if(!m){let v=t.documentElement.namespaceURI;v?m=t.createElementNS(v,"target"):m=t.createElement("target");let b=r.querySelector("source");b&&b.nextSibling?r.insertBefore(m,b.nextSibling):r.appendChild(m)}m.textContent=n}}serialize(t){return new XMLSerializer().serializeToString(t)}getFeatures(){return{hasSource:!0,hasNotes:!0}}getSupportedExportFormats(){return[{type:"xliff"}]}};var Y=class{canParse(t){return t.includes('version="2.0"')&&t.includes('presentation="libRExo"')}parse(t){let n=new DOMParser().parseFromString(t,"text/xml");if(n.querySelector("parsererror"))throw new Error("Failed to parse XML");let r=[],m=n.querySelectorAll("unit"),v=n.querySelector("xliff"),b=v?.getAttribute("srcLang")||void 0,k=v?.getAttribute("trgLang")||void 0;return m.forEach(A=>{let ue=A.getAttribute("id")||"",R=A.querySelector("segment"),ee=R?.querySelector("source"),fe=R?.querySelector("target"),ge=ee?.textContent||"",xe=fe?.textContent||"",H=R?.getAttribute("state")||void 0,Q=[];A.querySelectorAll("notes note").forEach(j=>{let B=j.getAttribute("category");B==="location"?Q.push({type:"location",content:j.textContent||"",category:"location"}):Q.push({type:"note",content:j.textContent||"",category:B||void 0})}),r.push({id:ue,source:ge,target:xe,notes:Q.length>0?Q:void 0,state:H})}),{document:n,units:r,sourceLang:b,targetLang:k,documentFormat:"xliff 2.0"}}updateUnit(t,e,n){let o=t.querySelectorAll("unit"),r=null;for(let m of o)if(m.getAttribute("id")===e){r=m;break}if(r){let m=r.querySelector("segment");if(!m){console.warn("Segment not found for unit",e);return}let v=m.querySelector("target");if(!v){let b=t.documentElement.namespaceURI;b?v=t.createElementNS(b,"target"):v=t.createElement("target");let k=m.querySelector("source");k&&k.nextSibling?m.insertBefore(v,k.nextSibling):m.appendChild(v)}v.textContent=n}}serialize(t){return new XMLSerializer().serializeToString(t)}getFeatures(){return{hasSource:!0,hasNotes:!0}}getSupportedExportFormats(){return[{type:"xliff"}]}};var se=class i{parsers=[new W,new Y,new ae];activeParser=null;parse(t){let e=this.parsers.find(n=>n.canParse(t));if(e?this.activeParser=e:t.includes('version="2.0"')?this.activeParser=this.parsers.find(n=>n instanceof Y)||null:this.activeParser=this.parsers.find(n=>n instanceof W)||null,!this.activeParser)throw new Error("Unsupported translation file format");return this.activeParser.parse(t)}getFeatures(){return this.activeParser?.getFeatures()??{hasSource:!0,hasNotes:!0}}getSupportedExportFormats(){return this.activeParser?.getSupportedExportFormats()??[{type:"xliff"}]}updateUnit(t,e,n){if(!this.activeParser)throw new Error("No active parser. Load a file first.");this.activeParser.updateUnit(t,e,n)}serialize(t){return this.activeParser?this.activeParser.serialize(t):t instanceof Document?new XMLSerializer().serializeToString(t):JSON.stringify(t,null,2)}generateJson(t,e="flat",n){if(e==="flat"){let o={};return t.forEach(r=>{o[r.id]=r.target}),JSON.stringify(o,null,2)}if(e==="angular"){let o={};return t.forEach(m=>{o[m.id]=m.target}),JSON.stringify({locale:n||"",translations:o},null,2)}if(e==="nested"){let o={};return t.forEach(r=>{let m=r.id.split("."),v=o;for(let b=0;b<m.length-1;b++){let k=m[b];(!v[k]||typeof v[k]!="object")&&(v[k]={}),v=v[k]}v[m[m.length-1]]=r.target}),JSON.stringify(o,null,2)}return""}static \u0275fac=function(e){return new(e||i)};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})};var le=class i{parser=X(se);rawDocument=h(null);fileName=h(null);sourceLang=h(void 0);targetLang=h(void 0);units=h([]);modifiedIds=h(new Set);documentFormat=h(void 0);features=h({hasSource:!0,hasNotes:!0});supportedExportFormats=h([]);filterQuery=h("");filterStatus=h("all");filteredUnits=M(()=>{let t=this.filterQuery().toLowerCase(),e=this.filterStatus(),n=this.features(),o=this.units();if(e==="translated")o=o.filter(r=>r.target&&r.target.trim()!=="");else if(e==="missing")o=o.filter(r=>!r.target||r.target.trim()==="");else if(e==="changed"){let r=this.modifiedIds();o=o.filter(m=>r.has(m.id))}return t?o.filter(r=>r.id.toLowerCase().includes(t)||n.hasSource&&r.source.toLowerCase().includes(t)||r.target.toLowerCase().includes(t)||n.hasNotes&&r.notes&&r.notes.some(m=>m.content.toLowerCase().includes(t))):o});totalStats=M(()=>{let t=this.units(),e=t.filter(n=>n.target&&n.target.trim()!=="").length;return{total:t.length,translated:e,missing:t.length-e,changed:this.modifiedIds().size}});async loadFile(t){let e=await t.text(),n=this.parser.parse(e);this.rawDocument.set(n.document),this.units.set(n.units),this.sourceLang.set(n.sourceLang),this.targetLang.set(n.targetLang),this.fileName.set(t.name),this.documentFormat.set(n.documentFormat),this.features.set(this.parser.getFeatures()),this.supportedExportFormats.set(this.parser.getSupportedExportFormats()),this.modifiedIds.set(new Set),this.filterStatus.set("all")}updateTranslation(t,e){this.units.update(o=>o.map(r=>r.id===t?he(Ce({},r),{target:e}):r)),this.modifiedIds.update(o=>{let r=new Set(o);return r.add(t),r});let n=this.rawDocument();n&&this.parser.updateUnit(n,t,e)}getExportContent(t,e){let n=this.rawDocument(),o=this.documentFormat();if(t==="xliff")return n?this.parser.serialize(n):"";let r=e||"flat";return!e&&o?.includes("json")&&(o.includes("nested")?r="nested":o.includes("angular")&&(r="angular")),this.parser.generateJson(this.units(),r,this.targetLang()||this.sourceLang())}static \u0275fac=function(e){return new(e||i)};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})};function Ie(i,t){i&1&&(p(0,"span",8),E(),p(1,"svg",10),L(2,"circle",11)(3,"circle",12)(4,"circle",13),u()())}function De(i,t){if(i&1){let e=w();p(0,"button",14),N("click",function(){f(e);let o=c().$implicit,r=c();return g(r.onPageChange(+o-1))}),s(1),u()}if(i&2){let e=c().$implicit,n=c();S("bg-primary",e===n.pageIndex()+1)("text-primary-foreground",e===n.pageIndex()+1)("shadow-sm",e===n.pageIndex()+1)("hover:bg-accent",e!==n.pageIndex()+1)("hover:text-accent-foreground",e!==n.pageIndex()+1),d(),T(" ",e," ")}}function Ne(i,t){if(i&1&&(p(0,"li"),x(1,Ie,5,0,"span",8)(2,De,2,11,"button",9),u()),i&2){let e=t.$implicit;d(),_(e==="..."?1:2)}}var de=class i{Math=Math;pageIndex=I.required();pageSize=I.required();total=I.required();pageChange=P();pages=M(()=>{let t=Math.ceil(this.total()/this.pageSize()),e=this.pageIndex()+1,n=2,o=[];for(let r=Math.max(2,e-n);r<=Math.min(t-1,e+n);r++)o.push(r);return e-n>2&&o.unshift("..."),e+n<t-1&&o.push("..."),o.unshift(1),t>1&&o.push(t),o});onPageChange(t){this.pageChange.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-pagination"]],inputs:{pageIndex:[1,"pageIndex"],pageSize:[1,"pageSize"],total:[1,"total"]},outputs:{pageChange:"pageChange"},decls:12,vars:4,consts:[["role","navigation","aria-label","pagination",1,"flex","items-center","gap-1.5"],["aria-label","Go to previous page",1,"inline-flex","items-center","justify-center","whitespace-nowrap","rounded-md","text-lg","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","border","border-input","bg-background","hover:bg-accent","hover:text-accent-foreground","h-8","w-8",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round",1,"h-4","w-4"],["d","m15 18-6-6 6-6"],[1,"flex","flex-row","items-center","gap-1"],["aria-label","Go to next page",1,"inline-flex","items-center","justify-center","whitespace-nowrap","rounded-md","text-lg","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","border","border-input","bg-background","hover:bg-accent","hover:text-accent-foreground","h-8","w-8",3,"click","disabled"],["d","m9 18 6-6-6-6"],[1,"ml-2","text-xs","text-muted-foreground","font-medium","tabular-nums"],["aria-hidden","true",1,"flex","h-8","w-8","items-center","justify-center"],[1,"inline-flex","items-center","justify-center","whitespace-nowrap","rounded-md","text-xs","font-semibold","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","h-8","w-8",3,"bg-primary","text-primary-foreground","shadow-sm","hover:bg-accent","hover:text-accent-foreground"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-3","w-3"],["cx","12","cy","12","r","1"],["cx","19","cy","12","r","1"],["cx","5","cy","12","r","1"],[1,"inline-flex","items-center","justify-center","whitespace-nowrap","rounded-md","text-xs","font-semibold","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","h-8","w-8",3,"click"]],template:function(e,n){e&1&&(p(0,"nav",0)(1,"button",1),N("click",function(){return n.onPageChange(n.pageIndex()-1)}),E(),p(2,"svg",2),L(3,"path",3),u()(),D(),p(4,"ul",4),U(5,Ne,3,1,"li",null,ie),u(),p(7,"button",5),N("click",function(){return n.onPageChange(n.pageIndex()+1)}),E(),p(8,"svg",2),L(9,"path",6),u()(),D(),p(10,"span",7),s(11),u()()),e&2&&(d(),O("disabled",n.pageIndex()===0),d(4),z(n.pages()),d(2),O("disabled",(n.pageIndex()+1)*n.pageSize()>=n.total()),d(4),Ee(" ",n.pageIndex()+1," / ",n.Math.ceil(n.total()/n.pageSize())," "))},encapsulation:2})};var Me=["targetInput"];function Ve(i,t){if(i&1){let e=w();p(0,"fieldset",9)(1,"div",10)(2,"legend",11),s(3,"Source Text"),u(),p(4,"button",21),N("click",function(){f(e);let o=c();return g(o.copyToClipboard(o.unit().source))}),E(),p(5,"svg",13),L(6,"path",14),u(),s(7," Copy "),u()(),D(),p(8,"div",22),s(9),u()()}if(i&2){let e=c();d(9),T(" ",e.unit().source," ")}}function Le(i,t){if(i&1&&(p(0,"span",27),s(1),u()),i&2){let e=c(2).$implicit;d(),T(" ",e.from," ")}}function Pe(i,t){if(i&1&&(p(0,"span",28),s(1),u()),i&2){let e=c(2).$implicit;d(),T(" ",e.category," ")}}function je(i,t){if(i&1&&(x(0,Le,2,1,"span",27),x(1,Pe,2,1,"span",28)),i&2){let e=c().$implicit;_(e.from?0:-1),d(),_(e.category?1:-1)}}function Ue(i,t){if(i&1&&(p(0,"span",29),s(1),u()),i&2){let e=c(2).$implicit;d(),T(" ",e.purpose," ")}}function ze(i,t){if(i&1&&(x(0,Ue,2,1,"span",29),p(1,"span",27),s(2," Sourcefile "),u()),i&2){let e=c().$implicit;_(e.purpose!=="location"&&e.purpose?0:-1)}}function Ae(i,t){if(i&1&&(p(0,"div",24)(1,"div",25),x(2,je,2,2)(3,ze,3,1),u(),p(4,"div",26),s(5),u()()),i&2){let e=t.$implicit;d(2),_(e.type==="note"?2:e.type==="location"?3:-1),d(2),S("font-mono",e.type==="location"),d(),T(" ",e.content," ")}}function Oe(i,t){if(i&1&&(p(0,"fieldset",16)(1,"legend",11),s(2,"Metadata & Context"),u(),p(3,"div",23),U(4,Ae,6,4,"div",24,ne),u()()),i&2){let e=c();d(4),z(e.sortedNotes())}}var G=class i{unit=I.required();showSource=I(!0);showNotes=I(!0);closed=P();save=P();sortedNotes=M(()=>{let t=this.unit().notes;return t?[...t].sort((e,n)=>{let o=r=>r.type==="note"&&r.priority?r.priority:10;return o(e)-o(n)}):[]});targetInput=K("targetInput");focus(){setTimeout(()=>{this.targetInput()?.nativeElement.focus()},0)}constructor(){}onInput(t){let e=t.target.value;this.save.emit({id:this.unit().id,target:e})}copyToClipboard(t){navigator.clipboard.writeText(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-translation-detail"]],viewQuery:function(e,n){e&1&&oe(n.targetInput,Me,5),e&2&&re()},inputs:{unit:[1,"unit"],showSource:[1,"showSource"],showNotes:[1,"showNotes"]},outputs:{closed:"closed",save:"save"},decls:30,vars:4,consts:[["targetInput",""],[1,"h-full","flex","flex-col","bg-background","border-l","border-border","pointer-events-auto"],[1,"flex","items-center","justify-between","p-4","border-b","border-border"],[1,"text-lg","font-semibold","text-foreground"],[1,"inline-flex","items-center","justify-center","p-2","rounded-md","font-medium","text-muted-foreground","hover:bg-accent","hover:text-accent-foreground",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","p-4","space-y-6"],[1,"space-y-2"],[1,"flex","items-center","justify-between"],[1,"text-xs","font-medium","text-muted-foreground","uppercase","tracking-wider"],["title","Copy ID",1,"text-xs","text-primary","hover:underline","hover:text-primary/80","flex","items-center","gap-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"font-mono","text-sm","text-foreground","bg-muted/50","p-2","rounded","break-all","select-all"],[1,"space-y-4"],["for","target-input",1,"text-xs","font-medium","text-muted-foreground","uppercase","tracking-wider"],["id","target-input","placeholder","Enter translation...",1,"flex","min-h-[150px]","w-full","rounded-md","border","border-input","bg-transparent","px-3","py-2","text-sm","shadow-sm","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50",3,"input","keydown.escape","value"],[1,"p-4","border-t","border-border","bg-muted/10"],[1,"text-xs","text-muted-foreground","text-center"],["title","Copy Source",1,"text-xs","text-primary","hover:underline","hover:text-primary/80","flex","items-center","gap-1",3,"click"],[1,"text-sm","text-foreground","bg-muted/30","p-3","rounded","border","border-border"],[1,"space-y-3"],[1,"p-3","rounded-lg","border","border-border","bg-muted/20","space-y-2"],[1,"flex","items-center","gap-2","flex-wrap"],[1,"text-sm","text-foreground","break-all"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-bold","uppercase","bg-muted","text-muted-foreground","border"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-bold","uppercase","bg-blue-100","text-blue-700","border","border-blue-200"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-bold","uppercase","bg-purple-100","text-purple-700","border","border-purple-200"]],template:function(e,n){if(e&1){let o=w();p(0,"div",1)(1,"div",2)(2,"h2",3),s(3,"Edit Translation"),u(),p(4,"button",4),N("click",function(){return f(o),g(n.closed.emit())}),p(5,"span",5),s(6,"Close"),u(),E(),p(7,"svg",6),L(8,"path",7),u()()(),D(),p(9,"div",8)(10,"fieldset",9)(11,"div",10)(12,"legend",11),s(13,"ID"),u(),p(14,"button",12),N("click",function(){return f(o),g(n.copyToClipboard(n.unit().id))}),E(),p(15,"svg",13),L(16,"path",14),u(),s(17," Copy "),u()(),D(),p(18,"div",15),s(19),u()(),x(20,Ve,10,1,"fieldset",9),x(21,Oe,6,0,"fieldset",16),p(22,"div",9)(23,"label",17),s(24,"Target Text"),u(),p(25,"textarea",18,0),N("input",function(m){return f(o),g(n.onInput(m))})("keydown.escape",function(){f(o);let m=q(26);return g(m.blur())}),u()()(),p(27,"div",19)(28,"div",20),s(29," Changes are saved automatically "),u()()()}e&2&&(d(19),T(" ",n.unit().id," "),d(),_(n.showSource()?20:-1),d(),_(n.showNotes()&&n.unit().notes&&n.unit().notes.length>0?21:-1),d(4),O("value",n.unit().target))},encapsulation:2})};var Je=(i,t)=>t.id;function qe(i,t){i&1&&(p(0,"th",4),s(1,"ID"),u())}function $e(i,t){i&1&&(p(0,"th",5),s(1,"Source"),u())}function He(i,t){i&1&&(p(0,"th",5),s(1,"Target"),u())}function Be(i,t){i&1&&(p(0,"th",4),s(1,"Notes"),u())}function Ge(i,t){if(i&1&&(p(0,"td",9),s(1),u()),i&2){let e=c().$implicit;d(),T(" ",e.id," ")}}function Re(i,t){if(i&1&&(p(0,"td",12),s(1),u()),i&2){let e=c().$implicit,n=c();S("whitespace-nowrap",n.viewMode()==="compact")("truncate",n.viewMode()==="compact")("max-w-[300px]",n.viewMode()==="compact"),d(),T(" ",e.source," ")}}function Qe(i,t){if(i&1&&(p(0,"td",12)(1,"div"),s(2),u()()),i&2){let e=c().$implicit,n=c();S("whitespace-nowrap",n.viewMode()==="compact")("truncate",n.viewMode()==="compact")("max-w-[300px]",n.viewMode()==="compact"),d(),S("text-muted-foreground",!e.target)("italic",!e.target)("truncate",n.viewMode()==="compact"),d(),T(" ",e.target||"Empty"," ")}}function Xe(i,t){if(i&1&&(p(0,"td",11),s(1),u()),i&2){let e=c().$implicit,n=c();O("title",n.getNotesSummary(e)),d(),T(" ",n.getNotesSummary(e)," ")}}function Ke(i,t){if(i&1){let e=w();p(0,"tr",8),N("click",function(){let o=f(e).$implicit,r=c();return g(r.unitSelect.emit(o.id))}),x(1,Ge,2,1,"td",9),x(2,Re,2,7,"td",10),x(3,Qe,3,13,"td",10),x(4,Xe,2,2,"td",11),u()}if(i&2){let e=t.$implicit,n=c();S("bg-muted",n.selectedId()===e.id),d(),_(n.showIdColumn()?1:-1),d(),_(n.showSourceColumn()?2:-1),d(),_(n.showTargetColumn()?3:-1),d(),_(n.showNotesColumn()?4:-1)}}function We(i,t){i&1&&(p(0,"tr")(1,"td",13),s(2,"No translations found"),u()())}var ce=class i{units=I.required();viewMode=I("spacious");showIdColumn=I(!0);showSourceColumn=I(!0);showTargetColumn=I(!0);showNotesColumn=I(!0);selectedId=I(null);unitSelect=P();getNotesSummary(t){return!t.notes||t.notes.length===0?"":t.notes.filter(e=>e.type==="note").sort((e,n)=>(e.priority??0)-(n.priority??0)).map(e=>e.content).join(" | ")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-translation-table"]],inputs:{units:[1,"units"],viewMode:[1,"viewMode"],showIdColumn:[1,"showIdColumn"],showSourceColumn:[1,"showSourceColumn"],showTargetColumn:[1,"showTargetColumn"],showNotesColumn:[1,"showNotesColumn"],selectedId:[1,"selectedId"]},outputs:{unitSelect:"unitSelect"},decls:12,vars:5,consts:[[1,"relative","w-full","overflow-auto"],[1,"w-full","caption-bottom","text-sm"],[1,"[&_tr]:border-b"],[1,"border-b","transition-colors","hover:bg-muted/50","data-[state=selected]:bg-muted"],["scope","col",1,"h-12","px-4","text-left","align-middle","font-medium","text-muted-foreground","w-1/6"],["scope","col",1,"h-12","px-4","text-left","align-middle","font-medium","text-muted-foreground","w-1/3","text-foreground"],[1,"[&_tr:last-child]:border-0"],[1,"border-b","transition-colors","hover:bg-muted/50","cursor-pointer",3,"bg-muted"],[1,"border-b","transition-colors","hover:bg-muted/50","cursor-pointer",3,"click"],[1,"p-4","align-middle","font-mono","text-xs","break-all","text-muted-foreground"],[1,"p-4","align-middle","text-foreground","transition-all","duration-200",3,"whitespace-nowrap","truncate","max-w-[300px]"],[1,"p-4","align-middle","text-xs","text-muted-foreground","max-w-[200px]","truncate",3,"title"],[1,"p-4","align-middle","text-foreground","transition-all","duration-200"],["colspan","999",1,"p-4","text-center","text-muted-foreground"]],template:function(e,n){e&1&&(p(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr",3),x(4,qe,2,0,"th",4),x(5,$e,2,0,"th",5),x(6,He,2,0,"th",5),x(7,Be,2,0,"th",4),u()(),p(8,"tbody",6),U(9,Ke,5,6,"tr",7,Je,!1,We,3,0,"tr"),u()()()),e&2&&(d(4),_(n.showIdColumn()?4:-1),d(),_(n.showSourceColumn()?5:-1),d(),_(n.showTargetColumn()?6:-1),d(),_(n.showNotesColumn()?7:-1),d(2),z(n.units()))},encapsulation:2})};function Ye(i,t){if(i&1&&(p(0,"span",12),s(1),u()),i&2){let e=t.$implicit;d(),F(e)}}var Ze=[".xlf",".json"],me=class i{fileSelected=P();isDragging=h(!1);acceptedFileTypes=Ze;onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragging.set(!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragging.set(!1)}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragging.set(!1);let e=t.dataTransfer?.files;e&&e.length>0&&this.validateAndEmit(e[0])}onFileSelected(t){let e=t.target;e.files&&e.files.length>0&&this.validateAndEmit(e.files[0])}validateAndEmit(t){this.acceptedFileTypes.some(e=>t.name.endsWith(e))?this.fileSelected.emit(t):alert(`Please upload a valid file type: ${this.acceptedFileTypes.join(", ")}`)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-file-upload"]],outputs:{fileSelected:"fileSelected"},decls:20,vars:7,consts:[["fileInput",""],["tabindex","0",1,"group","relative","flex","flex-col","items-center","justify-center","w-full","max-w-xl","mx-auto","h-72","border-2","border-dashed","rounded-2xl","cursor-pointer","bg-card","hover:bg-accent/5","transition-all","duration-300","ease-in-out","overflow-hidden",3,"dragover","dragleave","drop","click","keypress"],[1,"absolute","inset-0","bg-gradient-to-br","from-primary/5","via-transparent","to-primary/5","opacity-0","group-hover:opacity-100","transition-opacity","duration-500"],[1,"relative","z-10","flex","flex-col","items-center","justify-center","p-8","text-center"],[1,"w-16","h-16","mb-6","rounded-full","bg-primary/10","flex","items-center","justify-center","group-hover:scale-110","group-hover:bg-primary/20","transition-all","duration-300"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","24px","viewBox","0 0 24 24","width","24px","fill","#4B77D1",1,"w-8","h-8","text-primary"],["fill","none","height","24","width","24"],["d","M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M7,9l1.41,1.41L11,7.83V16h2V7.83l2.59,2.58L17,9l-5-5L7,9z"],[1,"text-xl","font-bold","tracking-tight","text-foreground","mb-2"],[1,"mb-4","text-sm","text-muted-foreground","max-w-[280px]"],[1,"font-semibold","text-primary"],[1,"flex","items-center","gap-3"],[1,"px-2.5","py-1","rounded-full","bg-muted","text-[10px]","font-bold","uppercase","tracking-wider","text-muted-foreground","border"],["type","file",1,"hidden",3,"change","accept"]],template:function(e,n){if(e&1){let o=w();p(0,"div",1),N("dragover",function(m){return f(o),g(n.onDragOver(m))})("dragleave",function(m){return f(o),g(n.onDragLeave(m))})("drop",function(m){return f(o),g(n.onDrop(m))})("click",function(){f(o);let m=q(19);return g(m.click())})("keypress",function(){f(o);let m=q(19);return g(m.click())}),L(1,"div",2),p(2,"div",3)(3,"div",4),E(),p(4,"svg",5)(5,"g"),L(6,"rect",6),u(),p(7,"g"),L(8,"path",7),u()()(),D(),p(9,"h3",8),s(10,"Ready to translate?"),u(),p(11,"p",9)(12,"span",10),s(13,"Click to upload"),u(),s(14," or drag and drop your files here. "),u(),p(15,"div",11),U(16,Ye,2,1,"span",12,ie),u()(),p(18,"input",13,0),N("change",function(m){return f(o),g(n.onFileSelected(m))}),u()()}e&2&&(S("border-primary",n.isDragging())("bg-accent/10",n.isDragging())("border-muted-foreground/20",!n.isDragging()),d(16),z(n.acceptedFileTypes),d(2),O("accept",n.acceptedFileTypes.join(",")))},encapsulation:2})};var pe=class i{fileSelected=P();onFileSelected(t){this.fileSelected.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-landing-screen"]],outputs:{fileSelected:"fileSelected"},decls:18,vars:0,consts:[[1,"flex-1","overflow-auto"],[1,"min-h-full","flex","flex-col","items-center","justify-center","p-6","text-center","max-w-4xl","mx-auto","py-20"],[1,"mb-12","space-y-4"],[1,"text-5xl","md:text-6xl","font-extrabold","tracking-tight","text-foreground"],[1,"bg-clip-text","text-transparent","bg-gradient-to-r","from-primary","to-blue-600"],[1,"text-xl","text-muted-foreground","max-w-2xl","mx-auto","leading-relaxed"],[1,"text-foreground","font-semibold"],[1,"w-full","mb-16"],[3,"fileSelected"]],template:function(e,n){e&1&&(a(0,"main",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),s(5,"BC XLF Translator"),l()(),a(6,"p",5),s(7," Import, translate, and export "),a(8,"span",6),s(9,"XLF"),l(),s(10," files for "),y(11,"br"),a(12,"span",6),s(13,"Microsoft Dynamics 365 Business Central"),l(),s(14," extensions."),y(15,"br"),l()(),a(16,"div",7)(17,"app-file-upload",8),C("fileSelected",function(r){return n.onFileSelected(r)}),l()()()())},dependencies:[me],encapsulation:2,changeDetection:0})};var et=["searchInput"];function tt(i,t){if(i&1&&(a(0,"span"),s(1),l(),a(2,"span",35),s(3,"\u279C"),l(),a(4,"span"),s(5),l()),i&2){let e=c(3);d(),F(e.sourceLang()||"?"),d(4),F(e.targetLang()||"?")}}function nt(i,t){if(i&1&&(a(0,"h1",32),s(1),l(),a(2,"div",33)(3,"span",34),s(4),l(),x(5,tt,6,2),l()),i&2){let e=c(2);d(),F(e.fileName()),d(3),F(e.documentFormat()),d(),_(e.sourceLang()||e.targetLang()?5:-1)}}function it(i,t){if(i&1){let e=w();a(0,"div",36),C("click",function(){f(e);let o=c(2);return g(o.closeExportDropdown())})("keypress",function(){f(e);let o=c(2);return g(o.closeExportDropdown())}),l()}}function ot(i,t){i&1&&(E(),a(0,"svg",44),y(1,"polyline",55),l())}function rt(i,t){if(i&1&&(a(0,"span",45),s(1),l()),i&2){let e=c(3);d(),T("(",e.targetLang(),")")}}function at(i,t){i&1&&(a(0,"span",46),s(1,"(No target language)"),l())}function st(i,t){i&1&&s(0," XLIFF ")}function lt(i,t){i&1&&s(0," JSON (Flat) ")}function dt(i,t){i&1&&s(0," JSON (Nested) ")}function ct(i,t){i&1&&s(0," JSON (Angular) ")}function mt(i,t){if(i&1&&x(0,lt,1,0)(1,dt,1,0)(2,ct,1,0),i&2){let e=c().$implicit;_(e.jsonFormat==="flat"?0:e.jsonFormat==="nested"?1:e.jsonFormat==="angular"?2:-1)}}function pt(i,t){if(i&1){let e=w();a(0,"button",56),C("click",function(){let o=f(e).$implicit,r=c(3);return g(r.selectExportFormat(o))}),x(1,st,1,0)(2,mt,3,1),l()}if(i&2){let e=t.$implicit,n=c(3);S("bg-accent",n.selectedExport()===e)("border-primary",n.selectedExport()===e),d(),_(e.type==="xliff"?1:e.type==="json"?2:-1)}}function ut(i,t){if(i&1){let e=w();a(0,"div",30)(1,"div",37)(2,"label",38),s(3,"Filename"),l(),a(4,"div",39)(5,"input",40),C("input",function(o){f(e);let r=c(2);return g(r.onExportFilenameChange(o))}),l(),a(6,"div",41)(7,"button",42),C("click",function(){f(e);let o=c(2);return g(o.toggleIncludeLocaleSuffix())}),a(8,"div",43),x(9,ot,2,0,":svg:svg",44),l(),a(10,"span"),s(11,"Include locale suffix"),l(),x(12,rt,2,1,"span",45)(13,at,2,0,"span",46),l()()(),a(14,"div",47)(15,"div",48),s(16,"Preview"),l(),a(17,"div",49),s(18),l()()(),a(19,"fieldset",37)(20,"legend",50),s(21,"Format"),l(),a(22,"div",51),U(23,pt,3,5,"button",52,ne),l()(),a(25,"div",53)(26,"button",54),C("click",function(){f(e);let o=c(2);return g(o.exportFile())}),s(27," Download File "),l()()()}if(i&2){let e=c(2);d(5),J("value",e.exportFilename()),d(2),S("opacity-50",!e.targetLang())("cursor-not-allowed",!e.targetLang()),J("disabled",!e.targetLang()),d(),S("bg-primary",e.includeLocaleSuffix()&&e.targetLang())("border-primary",e.includeLocaleSuffix()&&e.targetLang())("bg-muted",!e.targetLang()),d(),_(e.includeLocaleSuffix()&&e.targetLang()?9:-1),d(3),_(e.targetLang()?12:13),d(6),T("",e.exportFilenamePreview()," "),d(5),z(e.supportedExportFormats())}}function ft(i,t){if(i&1){let e=w();a(0,"header",2)(1,"div",5),y(2,"img",6),a(3,"div",7),x(4,nt,6,3),l()(),a(5,"div",8)(6,"div",8)(7,"div",9)(8,"div",10)(9,"span",11),s(10,"Total"),l(),a(11,"span",12),s(12),l()(),a(13,"div",10)(14,"span",11),s(15,"Translated"),l(),a(16,"span",13),s(17),l()(),a(18,"div",10)(19,"span",11),s(20,"Missing"),l(),a(21,"span",14),s(22),l()(),a(23,"div",10)(24,"span",11),s(25,"Changed"),l(),a(26,"span",15),s(27),l()()(),a(28,"div",16)(29,"div",17)(30,"span",18),s(31),Se(32,"number"),l(),a(33,"span",19),s(34,"%"),l()(),a(35,"div",20),y(36,"div",21),l()()(),y(37,"div",22),a(38,"div",23),x(39,it,1,0,"div",24),a(40,"div",25)(41,"button",26),C("click",function(){f(e);let o=c();return g(o.exportFile())}),s(42," Export "),l(),a(43,"button",27),C("click",function(){f(e);let o=c();return g(o.toggleExportDropdown())}),E(),a(44,"svg",28),y(45,"path",29),l()(),x(46,ut,28,15,"div",30),l(),D(),a(47,"button",31),C("click",function(){f(e);let o=c();return g(o.reset())}),s(48," Close "),l()()()()}if(i&2){let e=c();d(4),_(e.fileName()?4:-1),d(8),F(e.stats().total),d(5),F(e.stats().translated),d(5),F(e.stats().missing),d(5),F(e.stats().changed),d(4),F(Te(32,10,e.stats().translated/e.stats().total*100,"1.0-0")),d(5),we("width",e.stats().translated/e.stats().total*100,"%"),d(3),_(e.exportDropdownOpen()?39:-1),d(7),_(e.exportDropdownOpen()?46:-1)}}function gt(i,t){if(i&1){let e=w();a(0,"app-landing-screen",57),C("fileSelected",function(o){f(e);let r=c();return g(r.onFileSelected(o))}),l()}}function xt(i,t){if(i&1){let e=w();a(0,"div",94),C("click",function(){f(e);let o=c(2);return g(o.closeDropdown())})("keypress",function(){f(e);let o=c(2);return g(o.closeDropdown())}),l()}}function _t(i,t){i&1&&s(0," All ")}function vt(i,t){i&1&&s(0," Translated ")}function Ct(i,t){i&1&&s(0," Missing ")}function ht(i,t){i&1&&s(0," Changed ")}function bt(i,t){if(i&1&&s(0),i&2){let e=c(2);T(" (",e.stats().total,") ")}}function wt(i,t){if(i&1&&s(0),i&2){let e=c(2);T(" (",e.stats().translated,") ")}}function Et(i,t){if(i&1&&s(0),i&2){let e=c(2);T(" (",e.stats().missing,") ")}}function St(i,t){if(i&1&&s(0),i&2){let e=c(2);T(" (",e.stats().changed,") ")}}function Tt(i,t){if(i&1){let e=w();a(0,"div",76)(1,"div",95)(2,"button",96),C("click",function(){f(e);let o=c(2);return g(o.setFilter("all"))}),a(3,"span"),s(4,"All"),l(),a(5,"span",97),s(6),l()(),a(7,"button",96),C("click",function(){f(e);let o=c(2);return g(o.setFilter("translated"))}),a(8,"span"),s(9,"Translated"),l(),a(10,"span",97),s(11),l()(),a(12,"button",96),C("click",function(){f(e);let o=c(2);return g(o.setFilter("missing"))}),a(13,"span"),s(14,"Missing"),l(),a(15,"span",97),s(16),l()(),a(17,"button",96),C("click",function(){f(e);let o=c(2);return g(o.setFilter("changed"))}),a(18,"span"),s(19,"Changed"),l(),a(20,"span",97),s(21),l()()()()}if(i&2){let e=c(2);d(2),S("bg-accent",e.filterStatus()==="all"),d(4),F(e.stats().total),d(),S("bg-accent",e.filterStatus()==="translated"),d(4),F(e.stats().translated),d(),S("bg-accent",e.filterStatus()==="missing"),d(4),F(e.stats().missing),d(),S("bg-accent",e.filterStatus()==="changed"),d(4),F(e.stats().changed)}}function yt(i,t){if(i&1){let e=w();a(0,"div",94),C("click",function(){f(e);let o=c(2);return g(o.closeViewSettings())})("keypress",function(){f(e);let o=c(2);return g(o.closeViewSettings())}),l()}}function kt(i,t){i&1&&(E(),a(0,"svg",108),y(1,"polyline",55),l())}function Ft(i,t){i&1&&(E(),a(0,"svg",108),y(1,"polyline",55),l())}function It(i,t){if(i&1){let e=w();a(0,"button",106),C("click",function(){f(e);let o=c(3);return g(o.showSourceColumn.set(!o.showSourceColumn()))}),a(1,"span",107),x(2,Ft,2,0,":svg:svg",108),l(),a(3,"span"),s(4,"Source"),l()()}if(i&2){let e=c(3);d(2),_(e.showSourceColumn()?2:-1)}}function Dt(i,t){i&1&&(E(),a(0,"svg",108),y(1,"polyline",55),l())}function Nt(i,t){i&1&&(E(),a(0,"svg",108),y(1,"polyline",55),l())}function Mt(i,t){if(i&1){let e=w();a(0,"button",106),C("click",function(){f(e);let o=c(3);return g(o.showNotesColumn.set(!o.showNotesColumn()))}),a(1,"span",107),x(2,Nt,2,0,":svg:svg",108),l(),a(3,"span"),s(4,"Notes"),l()()}if(i&2){let e=c(3);d(2),_(e.showNotesColumn()?2:-1)}}function Vt(i,t){if(i&1){let e=w();a(0,"div",81)(1,"div",98)(2,"div",99)(3,"div",100),s(4," Density "),l(),a(5,"div",101)(6,"button",102),C("click",function(){f(e);let o=c(2);return g(o.viewMode.set("compact"))}),s(7," Compact "),l(),a(8,"button",102),C("click",function(){f(e);let o=c(2);return g(o.viewMode.set("spacious"))}),s(9," Spacious "),l()()(),y(10,"div",103),a(11,"div",104)(12,"div",105),s(13," Columns "),l(),a(14,"button",106),C("click",function(){f(e);let o=c(2);return g(o.showIdColumn.set(!o.showIdColumn()))}),a(15,"span",107),x(16,kt,2,0,":svg:svg",108),l(),a(17,"span"),s(18,"ID"),l()(),x(19,It,5,1,"button",109),a(20,"button",106),C("click",function(){f(e);let o=c(2);return g(o.showTargetColumn.set(!o.showTargetColumn()))}),a(21,"span",107),x(22,Dt,2,0,":svg:svg",108),l(),a(23,"span"),s(24,"Target"),l()(),x(25,Mt,5,1,"button",109),l()()()}if(i&2){let e=c(2);d(6),S("bg-background",e.viewMode()==="compact")("shadow-sm",e.viewMode()==="compact")("text-foreground",e.viewMode()==="compact")("text-muted-foreground",e.viewMode()!=="compact"),d(2),S("bg-background",e.viewMode()==="spacious")("shadow-sm",e.viewMode()==="spacious")("text-foreground",e.viewMode()==="spacious")("text-muted-foreground",e.viewMode()!=="spacious"),d(8),_(e.showIdColumn()?16:-1),d(3),_(e.features().hasSource?19:-1),d(3),_(e.showTargetColumn()?22:-1),d(3),_(e.features().hasNotes?25:-1)}}function Lt(i,t){if(i&1){let e=w();a(0,"aside",93)(1,"app-translation-detail",110),C("save",function(o){f(e);let r=c(2);return g(r.onUnitUpdate(o))})("closed",function(){f(e);let o=c(2);return g(o.selectedUnitId.set(null))}),l()()}if(i&2){let e=c(2);d(),J("unit",e.selectedUnit())("showSource",e.features().hasSource)("showNotes",e.features().hasNotes)}}function Pt(i,t){if(i&1){let e=w();a(0,"div",58)(1,"div",59)(2,"div",41)(3,"div",60)(4,"div",61),E(),a(5,"svg",62),y(6,"path",63),l()(),D(),a(7,"input",64,0),C("input",function(o){f(e);let r=c();return g(r.onSearchInput(o))})("keydown.escape",function(){f(e);let o=q(8);return g(o.blur())})("keydown.enter",function(o){f(e);let r=c();return g(r.onSearchEnter(o))})("keydown.arrowdown",function(o){f(e);let r=c();return g(r.onSearchEnter(o))}),l(),a(9,"kbd",65)(10,"span",66),s(11,"\u2318"),l(),s(12,"K "),l()(),a(13,"div",67),x(14,xt,1,0,"div",68),a(15,"div",69)(16,"button",70),C("click",function(){f(e);let o=c();return g(o.toggleDropdown())}),E(),a(17,"svg",71),y(18,"polygon",72),l(),D(),a(19,"span",73)(20,"span"),x(21,_t,1,0)(22,vt,1,0)(23,Ct,1,0)(24,ht,1,0),l(),a(25,"span",74),x(26,bt,1,1)(27,wt,1,1)(28,Et,1,1)(29,St,1,1),l()(),E(),a(30,"svg",75),y(31,"path",29),l()(),x(32,Tt,22,12,"div",76),l()()(),D(),a(33,"div",41)(34,"div",67),x(35,yt,1,0,"div",68),a(36,"div",69)(37,"button",77),C("click",function(){f(e);let o=c();return g(o.toggleViewSettings())}),E(),a(38,"svg",71),y(39,"path",78)(40,"path",79)(41,"path",80),l(),D(),a(42,"span"),s(43,"View"),l()(),x(44,Vt,26,20,"div",81),l()()()(),a(45,"div",82)(46,"div",83)(47,"app-translation-table",84),C("unitSelect",function(o){f(e);let r=c();return g(r.selectUnit(o,!0))}),l()()(),a(48,"div",85)(49,"div",86)(50,"div",8)(51,"div",41)(52,"div",87)(53,"kbd",88),s(54,"\u2191"),l(),a(55,"kbd",88),s(56,"\u2193"),l()(),a(57,"span",89),s(58,"Select"),l()(),a(59,"div",90)(60,"div",87)(61,"kbd",88),s(62,"\u2190"),l(),a(63,"kbd",88),s(64,"\u2192"),l()(),a(65,"span",89),s(66,"Page"),l()(),a(67,"div",90)(68,"div",87)(69,"kbd",91),s(70,"Enter"),l()(),a(71,"span",89),s(72,"Edit"),l()(),a(73,"div",90)(74,"div",87)(75,"kbd",88),s(76,"Esc"),l()(),a(77,"span",89),s(78,"Back"),l()()(),a(79,"app-pagination",92),C("pageChange",function(o){f(e);let r=c();return g(r.changePage(o))}),l()()()(),x(80,Lt,2,3,"aside",93)}if(i&2){let e,n,o=c();d(7),J("value",o.filterQuery()),d(7),_(o.dropdownOpen()?14:-1),d(7),_((e=o.filterStatus())==="all"?21:e==="translated"?22:e==="missing"?23:e==="changed"?24:-1),d(5),_((n=o.filterStatus())==="all"?26:n==="translated"?27:n==="missing"?28:n==="changed"?29:-1),d(6),_(o.dropdownOpen()?32:-1),d(3),_(o.viewSettingsOpen()?35:-1),d(9),_(o.viewSettingsOpen()?44:-1),d(3),J("units",o.paginatedUnits())("viewMode",o.viewMode())("showIdColumn",o.showIdColumn())("showSourceColumn",o.showSourceColumn())("showTargetColumn",o.showTargetColumn())("showNotesColumn",o.showNotesColumn())("selectedId",o.selectedUnitId()),d(32),J("pageIndex",o.pageIndex())("pageSize",o.pageSize())("total",o.totalItems()),d(),_(o.selectedUnit()?80:-1)}}var ke=class i{state=X(le);document=X(be);searchInput=K("searchInput");detailView=K(G);fileName=this.state.fileName;sourceLang=this.state.sourceLang;targetLang=this.state.targetLang;filterQuery=this.state.filterQuery;filterStatus=this.state.filterStatus;stats=this.state.totalStats;documentFormat=this.state.documentFormat;features=this.state.features;supportedExportFormats=this.state.supportedExportFormats;pageIndex=h(0);pageSize=h(10);selectedUnitId=h(null);dropdownOpen=h(!1);viewMode=h("spacious");viewSettingsOpen=h(!1);showIdColumn=h(!0);showSourceColumn=h(!0);showTargetColumn=h(!0);showNotesColumn=h(!0);paginatedUnits=M(()=>{let t=this.state.filteredUnits(),e=this.pageIndex()*this.pageSize();return t.slice(e,e+this.pageSize())});totalItems=M(()=>this.state.filteredUnits().length);selectedUnit=M(()=>{let t=this.selectedUnitId();return t&&this.state.units().find(e=>e.id===t)||null});async onFileSelected(t){try{await this.state.loadFile(t),this.pageIndex.set(0);let e=t.name;(e.endsWith(".xlf")||e.endsWith(".xliff")||e.endsWith(".json"))&&(e=e.substring(0,e.lastIndexOf("."))),this.exportFilename.set(e);let n=this.supportedExportFormats();n.length>0?this.selectedExport.set(n[0]):this.selectedExport.set(null)}catch(e){console.error(e),alert("Failed to parse file")}}constructor(){ve(()=>{let t=this.features();this.showSourceColumn.set(t.hasSource),this.showNotesColumn.set(t.hasNotes)}),ve(t=>{let e=n=>{if((n.metaKey||n.ctrlKey)&&n.key==="k"){n.preventDefault(),this.searchInput()?.nativeElement.focus();return}if(!(n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA")){if(n.key==="ArrowLeft"){this.changePage(this.pageIndex()-1);return}else if(n.key==="ArrowRight"){this.changePage(this.pageIndex()+1);return}if(n.key==="Escape"&&this.selectedUnitId()){this.selectedUnitId.set(null);return}this.paginatedUnits().length>0&&(n.key==="ArrowDown"?(n.preventDefault(),this.navigateSelection(1)):n.key==="ArrowUp"?(n.preventDefault(),this.navigateSelection(-1)):n.key==="Enter"&&this.selectedUnitId()&&(n.preventDefault(),this.selectUnit(this.selectedUnitId(),!0)))}};document.addEventListener("keydown",e),t(()=>document.removeEventListener("keydown",e))})}navigateSelection(t){let e=this.paginatedUnits(),n=this.selectedUnitId();if(!n){this.selectUnit(e[0].id);return}let r=e.findIndex(m=>m.id===n)+t;r>=0&&r<e.length&&this.selectUnit(e[r].id)}changePage(t){let e=Math.ceil(this.totalItems()/this.pageSize());t>=0&&t<e&&(this.pageIndex.set(t),this.selectedUnitId.set(null))}onSearchInput(t){let e=t.target.value;this.state.filterQuery.set(e),this.pageIndex.set(0),this.selectedUnitId.set(null)}onSearchEnter(t){t.target.blur();let n=this.paginatedUnits();n.length>0&&this.selectUnit(n[0].id)}toggleDropdown(){this.dropdownOpen.update(t=>!t)}closeDropdown(){this.dropdownOpen.set(!1)}toggleViewSettings(){this.viewSettingsOpen.update(t=>!t)}closeViewSettings(){this.viewSettingsOpen.set(!1)}setFilter(t){this.state.filterStatus.set(t),this.pageIndex.set(0),this.selectedUnitId.set(null),this.closeDropdown()}selectUnit(t,e=!1){this.selectedUnitId.set(t),e&&setTimeout(()=>this.detailView()?.focus(),0)}onUnitUpdate(t){this.state.updateTranslation(t.id,t.target)}reset(){window.location.reload()}exportDropdownOpen=h(!1);exportFilename=h("");includeLocaleSuffix=h(!0);selectedExport=h(null);exportFilenamePreview=M(()=>{let t=this.exportFilename()||"translations",e=this.selectedExport(),n=this.targetLang();if(!e)return t;let o=this.includeLocaleSuffix()&&n?`.${n}`:"",r=e.type==="json"?".json":".xlf";return`${t}${o}${r}`});exportLabel=M(()=>{let t=this.selectedExport();return t?t.type==="xliff"?"XLIFF":t.jsonFormat==="flat"?"JSON (Flat)":t.jsonFormat==="nested"?"JSON (Nested)":t.jsonFormat==="angular"?"JSON (Angular)":"Export":"Export"});exportFile(t,e){let n,o;if(t)n=t,o=e,this.selectedExport.set({type:t,jsonFormat:e});else{let k=this.selectedExport();k?(n=k.type,o=k.type==="json"?k.jsonFormat:void 0):n="xliff"}let r=this.state.getExportContent(n,o),m=new Blob([r],{type:n==="json"?"application/json":"application/xliff+xml"}),v=URL.createObjectURL(m),b=this.document.createElement("a");b.href=v,b.download=this.exportFilenamePreview(),b.click(),URL.revokeObjectURL(v),this.closeExportDropdown()}toggleExportDropdown(){this.exportDropdownOpen.update(t=>!t)}closeExportDropdown(){this.exportDropdownOpen.set(!1)}onExportFilenameChange(t){let e=t.target.value;this.exportFilename.set(e)}selectExportFormat(t){this.selectedExport.set(t)}toggleIncludeLocaleSuffix(){this.targetLang()&&this.includeLocaleSuffix.update(t=>!t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-translations-editor"]],viewQuery:function(e,n){e&1&&oe(n.searchInput,et,5)(n.detailView,G,5),e&2&&re(2)},decls:5,vars:2,consts:[["searchInput",""],[1,"flex","flex-col","h-screen","bg-background","text-foreground","overflow-hidden"],[1,"flex-none","border-b","px-6","py-4","flex","justify-between","items-center","bg-background","z-50"],[1,"flex-1","flex","overflow-hidden"],[1,"flex","w-full"],[1,"flex","items-center","gap-4"],["src","./assets/language.svg","alt","Language",1,"w-6","h-6"],[1,"flex","flex-col","gap-0"],[1,"flex","items-center","gap-6"],[1,"flex","gap-4","text-sm"],[1,"flex","flex-col","items-center"],[1,"text-muted-foreground","text-[10px]","uppercase","font-bold","tracking-wider","mb-0.5"],[1,"font-bold","text-foreground"],[1,"font-bold","text-green-600","dark:text-green-400"],[1,"font-bold","text-orange-600","dark:text-orange-400"],[1,"font-bold","text-blue-600","dark:text-blue-400"],[1,"flex","flex-col","items-end","min-w-[80px]"],[1,"flex","items-baseline","gap-1","mb-1"],[1,"text-xl","font-bold","tracking-tight"],[1,"text-xs","font-medium","text-muted-foreground"],[1,"h-1.5","w-full","bg-muted","rounded-full","overflow-hidden"],[1,"h-full","bg-primary","transition-all","duration-500","ease-out"],[1,"h-8","w-px","bg-border"],[1,"flex","gap-2","relative"],["tabindex","0",1,"fixed","inset-0","z-60"],[1,"relative","z-70","flex","items-center"],[1,"inline-flex","items-baseline","justify-center","gap-2","rounded-l-md","text-sm","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","bg-primary","text-primary-foreground","hover:bg-primary/90","h-9","px-4","py-2","border-r","border-primary-foreground/20",3,"click"],[1,"inline-flex","items-center","justify-center","rounded-r-md","text-sm","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","bg-primary","text-primary-foreground","hover:bg-primary/90","h-9","px-2","py-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-4","w-4"],["d","m6 9 6 6 6-6"],[1,"absolute","right-0","top-full","mt-1","w-[320px]","rounded-md","border","bg-popover","text-popover-foreground","shadow-lg","animate-in","fade-in-0","zoom-in-95","p-4","space-y-4"],[1,"inline-flex","items-center","justify-center","rounded-md","text-sm","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","border","border-input","bg-background","hover:bg-destructive","hover:text-destructive-foreground","h-9","px-4","py-2",3,"click"],[1,"text-lg","font-bold","tracking-tight","text-foreground","leading-none"],[1,"flex","items-center","gap-2","text-xs","text-muted-foreground","mt-1"],[1,"uppercase","font-mono","bg-muted","px-1.5","py-0.5","rounded","text-[10px]","tracking-wider","font-medium"],[1,"text-[10px]"],["tabindex","0",1,"fixed","inset-0","z-60",3,"click","keypress"],[1,"space-y-2"],["for","exportFilename",1,"text-[10px]","font-bold","text-muted-foreground","uppercase","tracking-widest"],[1,"space-y-1"],["id","exportFilename","type","text","placeholder","Filename...",1,"flex","h-8","w-full","rounded-md","border","border-input","bg-background","px-3","py-1","text-sm","ring-offset-background","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2",3,"input","value"],[1,"flex","items-center","gap-2"],[1,"flex","items-center","gap-2","text-[10px]","text-muted-foreground","hover:text-foreground","transition-colors",3,"click","disabled"],[1,"w-3","h-3","rounded","border","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","10","height","10","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"text-primary-foreground"],[1,"text-primary","font-bold"],[1,"italic"],[1,"bg-muted/50","rounded","p-2","border","border-dashed"],[1,"text-[10px]","text-muted-foreground","uppercase","font-medium","mb-1"],[1,"text-xs","font-mono","truncate","text-foreground"],[1,"text-[10px]","font-bold","text-muted-foreground","uppercase","tracking-widest"],[1,"grid","grid-cols-2","gap-1"],[1,"flex","items-center","justify-center","rounded-sm","px-2","py-1.5","text-xs","border","transition-colors","hover:bg-accent",3,"bg-accent","border-primary"],[1,"pt-2","border-t"],[1,"w-full","inline-flex","items-center","justify-center","rounded-md","text-sm","font-medium","bg-primary","text-primary-foreground","hover:bg-primary/90","h-9","px-4",3,"click"],["points","20 6 9 17 4 12"],[1,"flex","items-center","justify-center","rounded-sm","px-2","py-1.5","text-xs","border","transition-colors","hover:bg-accent",3,"click"],[1,"flex","w-full",3,"fileSelected"],[1,"flex-1","flex","flex-col","min-w-0"],[1,"flex-none","pt-4","px-4","flex","items-center","justify-between","gap-4"],[1,"relative","w-72"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-muted-foreground"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","placeholder","Search...",1,"flex","h-9","w-full","rounded-md","border","border-input","bg-background","px-3","ps-10","py-1","text-sm","ring-offset-background","file:border-0","file:bg-transparent","file:text-sm","file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:cursor-not-allowed","disabled:opacity-50","pr-10",3,"input","keydown.escape","keydown.enter","keydown.arrowdown","value"],[1,"pointer-events-none","absolute","right-1.5","top-1.5","hidden","h-6","select-none","items-center","gap-1","rounded","border","bg-muted","px-1.5","font-mono","text-[10px]","font-medium","text-muted-foreground","opacity-100","sm:flex"],[1,"text-sm"],[1,"flex","items-center","gap-2","relative"],["tabindex","0",1,"fixed","inset-0","z-20"],[1,"relative","z-30"],["title","Filter units",1,"inline-flex","items-center","justify-center","rounded-md","text-sm","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","border","border-input","bg-background","hover:bg-accent","hover:text-accent-foreground","h-9","px-3","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"flex","items-baseline","gap-1"],[1,"text-[10px]","text-muted-foreground","tabular-nums"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"h-3","w-3","opacity-50","ml-1"],[1,"absolute","left-0","top-full","mt-1","w-[200px]","rounded-md","border","bg-popover","text-popover-foreground","shadow-md","animate-in","fade-in-0","zoom-in-95"],["title","View Settings",1,"inline-flex","items-center","justify-center","rounded-md","text-sm","font-medium","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","disabled:opacity-50","border","border-input","bg-background","hover:bg-accent","hover:text-accent-foreground","h-9","px-3","gap-2",3,"click"],["d","M3 3h18v18H3z"],["d","M9 3v18"],["d","M3 9h18"],[1,"absolute","right-0","top-full","mt-1","w-[220px]","rounded-md","border","bg-popover","text-popover-foreground","shadow-md","animate-in","fade-in-0","zoom-in-95"],[1,"flex-1","overflow-auto","p-4","pb-0"],[1,"rounded-md","border"],[3,"unitSelect","units","viewMode","showIdColumn","showSourceColumn","showTargetColumn","showNotesColumn","selectedId"],[1,"flex-none","p-4","bg-background","border-t"],[1,"flex","items-center","justify-between","gap-4"],[1,"flex","items-center","gap-1"],[1,"pointer-events-none","h-5","select-none","items-center","justify-center","rounded","border","bg-muted","px-1.5","font-mono","text-xs","font-medium","text-muted-foreground","flex","min-w-[20px]"],[1,"text-[10px]","text-muted-foreground","font-bold","uppercase","tracking-wider"],[1,"flex","items-center","gap-2","border-l","pl-4"],[1,"pointer-events-none","h-5","select-none","items-center","justify-center","rounded","border","bg-muted","px-1.5","font-mono","text-xs","font-medium","text-muted-foreground","flex","min-w-[40px]"],[3,"pageChange","pageIndex","pageSize","total"],[1,"w-[400px]","flex-none","shadow-xl","z-30"],["tabindex","0",1,"fixed","inset-0","z-20",3,"click","keypress"],[1,"p-1"],[1,"relative","flex","w-full","cursor-default","select-none","items-center","justify-between","rounded-sm","px-2","py-1.5","text-sm","outline-none","transition-colors","hover:bg-accent","hover:text-accent-foreground",3,"click"],[1,"text-xs","text-muted-foreground","tabular-nums"],[1,"p-2","space-y-3"],[1,"space-y-1.5"],[1,"px-2","text-[10px]","uppercase","font-bold","tracking-wider","text-muted-foreground/70"],[1,"flex","items-center","rounded-md","border","bg-muted","p-0.5","h-8"],[1,"flex-1","inline-flex","items-center","justify-center","rounded-sm","px-2","text-xs","font-medium","transition-all","focus-visible:outline-none","h-full",3,"click"],[1,"h-px","bg-border","-mx-2"],[1,"space-y-0.5"],[1,"px-2","pb-1","text-[10px]","uppercase","font-bold","tracking-wider","text-muted-foreground/70"],[1,"relative","flex","w-full","cursor-default","select-none","items-center","rounded-sm","py-1.5","pl-8","pr-2","text-sm","outline-none","transition-colors","hover:bg-accent","hover:text-accent-foreground",3,"click"],[1,"absolute","left-2","flex","h-3.5","w-3.5","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round",1,"h-3.5","w-3.5"],[1,"relative","flex","w-full","cursor-default","select-none","items-center","rounded-sm","py-1.5","pl-8","pr-2","text-sm","outline-none","transition-colors","hover:bg-accent","hover:text-accent-foreground"],[3,"save","closed","unit","showSource","showNotes"]],template:function(e,n){e&1&&(a(0,"div",1),x(1,ft,49,13,"header",2),a(2,"div",3),x(3,gt,1,0,"app-landing-screen",4)(4,Pt,81,18),l()()),e&2&&(d(),_(n.fileName()?1:-1),d(2),_(n.fileName()?4:3))},dependencies:[pe,ce,G,de,ye],encapsulation:2})};export{ke as TranslationsEditorComponent};
